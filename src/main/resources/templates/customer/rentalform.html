<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="images/dz.png" />
    <title>Home</title>
    <link rel="stylesheet" href="stylesheets/homepage.css" />
    <link
      th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
  </head>
  <body style="background-color: #f39d7d">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">DZ EMPIRE RENTAL</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="d-flex justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" th:href="@{/homecustomer}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Feedback</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" th:href="@{/logout}">Logout</a>
            </li>
            <li class="nav-item">
              <a th:href="@{/profilecust}">
                <img
                  src="images/customer.png"
                  style="width: 30px; height: 30px; cursor: pointer"
                />
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container p-4">
      <h1 class="text-center" style="margin: 15px">MAKE YOUR TOUR MEMORABLE</h1>
      <i class="bi bi-arrow-left-circle-fill" style="width: 50%;height: 50%;"></i>

      <div class="row">
        <div class="col-md-6" style="margin-top: 100px">
          <div class="card p-3 rounded">
            <img th:src="${car.imageSrc}" class="img-fluid rounded" alt="" />
          </div>
        </div>
        <div class="col-md-6">
          <form th:action="@{/rentalform}" method="post">
            <input type="hidden" th:value="${car.carid}" name="carid" />
            <div class="mb-3">
              <label for="carType" class="form-label">Car Type:</label>
              <input
                type="text"
                class="form-control"
                id="carType"
                name="cartype"
                th:value="${car.cartype}"
                disabled
              />
            </div>
            <div class="mb-3">
              <label for="carName" class="form-label">Car Name:</label>
              <input
                type="text"
                class="form-control"
                name="carname"
                th:value="${car.carname}"
              />
            </div>
            <div class="mb-3">
              <label for="day" class="form-label">Number of Days:</label>
              <input
                type="number"
                class="form-control"
                name="day"
                id="dayInput"
                th:value="${day}"
                required
              />
            </div>
            <div class="mb-3">
              <label for="pickupDate" class="form-label">Pickup Date:</label>
              <input
                type="date"
                class="form-control"
                id="datestartInput"
                name="datestart"
                th:value="${datestart}"
                required
              />
            </div>
            <div class="mb-3">
              <label for="dropoffDate" class="form-label">Drop-off Date:</label>
              <input
                type="date"
                class="form-control"
                id="dateendInput"
                name="dateend"
                th:value="${dateend}"
                required
              />
            </div>
            <div class="mb-3">
              <label for="price" class="form-label">Price:</label>
              <input
                type="text"
                id="priceInput"
                class="form-control"
                name="carprice"
                th:value="${car.carprice}"
                hidden
              />
              <input
                type="text"
                id="totalInput"
                class="form-control"
                name="totalrentprice"
                readonly
              />
            </div>
            <div class="mt-5 mb-5 text-center">
              <button class="btn btn-warning col-10" type="submit">Pay Now</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <footer
      class="col-12 py-3 bg-dark text-white d-flex align-content-end fixed-bottom"
    >
      <div class="container">
        <p class="m-0 text-center">
          Copyright &copy; 2023 <a href="#">DZ EMPIRE CAR RENTAL</a>
        </p>
      </div>
    </footer>
    <script
      th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js}"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js}"
      integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
      crossorigin="anonymous"
    ></script>
    <script
      th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    <script>
      // Function to calculate price based on selected day
      function calculatePrice() {
        var dayInput = document.getElementById("dayInput").value;
        var priceInput = document.getElementById("priceInput").value;
        var totalInput = document.getElementById("totalInput");
        var carprice = parseFloat(priceInput);
        console.log(priceInput);
        console.log(dayInput);
        console.log(dayInput.value != "");

        if (dayInput.value != "") {
          var days = parseFloat(dayInput.value);
          var totalPrice = carprice * dayInput;
          console.log(totalPrice);
          totalInput.value = totalPrice;
        } else {
          totalInput.value = carprice.toFixed(2);
        }
      }

      // Function to adjust the date range based on selected start date
      function adjustDateRange() {
        var datestartInput = document.getElementById("datestartInput");
        var dateendInput = document.getElementById("dateendInput");
        var dayInput = document.getElementById("dayInput");

        if (datestartInput.value && dayInput.value && !isNaN(dayInput.value)) {
          var startDate = new Date(datestartInput.value);
          var days = parseFloat(dayInput.value);
          var endDate = new Date(
            startDate.getTime() + (days - 1) * 24 * 60 * 60 * 1000
          );
          dateendInput.value = endDate.toISOString().slice(0, 10);
        } else {
          dateendInput.value = "";
        }
      }

      // Add event listeners to call the functions on input change
      document
        .getElementById("dayInput")
        .addEventListener("input", calculatePrice);
      document
        .getElementById("datestartInput")
        .addEventListener("input", adjustDateRange);

      // Initial calculations on page load
      calculatePrice();
      adjustDateRange();
    </script>
  </body>
</html>
